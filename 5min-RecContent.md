# 5分钟推荐系统-基于内容的推荐CB

[toc]

### 1、基本概念

基于内容的推荐是以用户、物品的属性为依据，记性分析和计算，做出推荐。

根据用户的属性建立用户的特征，就是用户画像。

根据物品的属性建立物品的特征，就是物品画像。

```
建立画像，其实是给用户物品打标签，分类。然后针对这部分用户的行为特点做出带分类的推荐。
```

基于内容的推荐一般需要实现3个模块：物品表征，用户表征学习，推荐。

### 2、特征向量化-以视频推荐为例

用户画像/维度:   用户基本特征【年龄-职业】, 行为【点播 浏览】兴趣偏好 观看时间
物品画像/维度：视频维度-视频特征[时长，分类，演员，导演，风格，上映时间]



**物品特征向量示例**：

演员和平均评分作为电影特征，两部电影 共有3个演员，2个演员参与了两部电影。一个电影评分为2，一个为4

那么特征表示为：

[11102] 

[11014]



**用户特征向量举例：**

如果效用矩阵只有0-1 两种取值，假设用户对于看过的电影中30% 有tom cruise , 那么 用户画像中对 tom cruise 的分量为0.3。

效用矩阵取值为1-5 ， 那么通过数值来衡量相似度，将每个元素减去均值。有4部tom cruise 的 电影评分为3，4，5，4 。假设用户对所有电影平均分为3， 那么对应tom cruise 的分量为 3-3 + 4-3 + 5-3 + 4-4  =4 /4 , 分量为1 。 

有了特征向量，我们来开始推荐

### 3、基础CB推荐算法

#### 3.1 算法原理：

利用视频的基本信息和用户偏好的相似性进行视频推荐。

计算公式为： Sim(u,q) = SUM( k x Sim( ui,qi))     ui qi 为用户和视频在第i个方面的特征

#### 3.2 算法流程

1- 每个视频用特征向量表示m1,...mp , mi 为视频的特征

2- 用户行为中学习，根据用户有过行为的视频，采用第二节中的方法得到用户对视频的分量

3- 计算用户向量和每个视频向量的相似度

4- 取TopK 

### 4、TF-IDF推荐算法

对于非结构化的内容，例如影评，那么可以采用TFIDF ， 提取影评关键词作为影评分量。  

这样得到的视频的影评关键词和用户的影评关键词作为影评分量。

例如一篇影评的关键字为 自由0.05, 船长0.0025 海盗0        影评向量为 [0.05  0.005 0 ]

### 5、KNN 算法

#### 5.1 算法思路：

将和目标视频最相似的K个物品推荐给用户。

#### 5.2 算法流程：

1、计算任意视频i,j相似度，根据用户对视频i, j 的都做过的评价向量进行相似度计算。

2、找出k个和用户已评分的视频 相似度最高的视频



### 6、Rocchio 算法

基于假设：用户特征向量应该与用户喜欢的视频相似，讨厌的视频不同。

根据用户的历史数据对用户的原始特征向量不断修改，实现实时更新用户画像功能。

例如：

给星球大战高分：得到用户特征向量{科幻0.8，冒险0.7}

2012 打了低分，那么更新为{科幻0.5，冒险0.7}



### 7、决策树

算法原理：决策树内部节点为视频属性，例如喜剧-奇幻-冒险  

​                  叶子节点为喜欢或者不喜欢

适用于特征向量少的情况

 

### 8、线性分类算法

算法原理：

x1~xn是物品的各种特征属性，如用户年龄段、性别、地域、物品的价格、类别等等，y则是用户对于该物品的喜好程度，可以是购买记录、浏览、收藏等等 。  

通过大量这类的数据，我们可以回归拟合出一个函数，计算出x1~xn对应的系数，这即是各特征属性对应的权重，权重值越大则表明该属性对于用户选择商品越重要。



### 9、朴素贝叶斯算法

判断用户是否感兴趣，转化为分类问题： 一类为喜欢，另一类为不喜欢

假设各个特征独立。

```python
p(vi|C=c)   =  Count(vi,Video(c)) / ( Allterms(Video(c))  +  |V|) 

 Count(vi,Video(c))   vi, 在标记为c的视频中出现的次数  

Allterms(Video(c))   这些视频中的所有特征的个数，

|V| 所有视频中的特征数
```









 